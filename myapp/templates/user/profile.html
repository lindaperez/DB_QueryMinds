{% extends "layouts/base.html" %}
{% load static %}

{% block title %}My Profile{% endblock %}

{% block content %}
<style>
  .fade-in {
    animation: fadeInUp 0.6s ease-out;
  }

  @keyframes fadeInUp {
    0% {
      opacity: 0;
      transform: translateY(30px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .profile-avatar {
    transition: transform 0.3s ease;
  }

  .profile-avatar:hover {
    transform: scale(1.1);
  }

  @media (prefers-color-scheme: dark) {
    .card {
      background-color: #1e1e2f !important;
      color: #ffffff;
    }

    .btn-outline-secondary {
      border-color: #aaa;
      color: #ccc;
    }

    .btn-outline-secondary:hover {
      background-color: #333;
      color: white;
    }
  }
</style>

<div class="container pt-5 mt-5 d-flex justify-content-center">
  <div class="card p-4 shadow fade-in" style="width: 600px; border-radius: 1rem;">
    <div class="text-center mb-4">
        <div class="position-relative d-inline-block" style="width: 140px; height: 140px;">
          <div class="rounded-circle bg-light border border-3 border-primary shadow" 
               style="width: 140px; height: 140px; position: absolute; top: 0; left: 0;">
          </div>
          {% if role_profile and role_profile.profile_picture %}
            <img src="{{ role_profile.profile_picture.url }}"
                 alt="Profile Picture"
                 class="rounded-circle position-relative profile-avatar"
                 style="width: 120px; height: 120px; margin-top: 10px;">
          {% else %}
            <img src="{% static 'assets/images/user/avatar-2.jpg' %}"
                 alt="Default Profile"
                 class="rounded-circle position-relative profile-avatar"
                 style="width: 120px; height: 120px; margin-top: 10px;">
          {% endif %}
        </div>
      </div>      

    <div class="text-center">
      <p><strong>Username:</strong> {{ user.username }}</p>
      <p><strong>Email:</strong> {{ user.email }}</p>
      <p><strong>Role:</strong> {{ user_profile.user_type|title }}</p>


      {% if role_profile %}
        {% if user_profile.user_type == 'instructor' %}
          <p><strong>Phone:</strong> {{ role_profile.n_phone }}</p>
          <p><strong>Specialty:</strong> {{ role_profile.v_specialty }}</p>
          <p><strong>Bio:</strong> {{ role_profile.v_bio }}</p>
        {% elif user_profile.user_type == 'student' %}
          <p><strong>GPA:</strong> {{ role_profile.n_gpa }}</p>
          <p><strong>Join Date:</strong> {{ role_profile.d_join_date|date:"F j, Y" }}</p>
          <p><strong>Start Date:</strong> {{ role_profile.d_starting_date|date:"F j, Y" }}</p>
        {% endif %}
      {% endif %}
    </div>

    <div class="d-flex justify-content-between mt-4">
      <a href="{% url 'home' %}" class="btn btn-outline-secondary">‚Üê Return Home</a>
      <a href="{% url 'edit_profile' %}" class="btn btn-primary">Edit Profile</a>
    </div>
  </div>
</div>
{% endblock %}
